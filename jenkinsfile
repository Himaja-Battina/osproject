pipeline {
    agent any
    stages {
        stage('Deploy Application') {
            steps {
                // Install 'oc' command using 'openshift-client-plugin'
               
                // Configure OCP credentials
                withCredentials([string(credentialsId: 'cluster-auth-token', variable: 'CLUSTER_AUTH_TOKEN'),
                                  string(credentialsId: 'ocp-server-url', variable: 'OCP_SERVER_URL'),
                                  string(credentialsId: 'ocp-project', variable: 'OCP_PROJECT')]) {
                    // Deploy application to OCP cluster using 'oc' command and deployment YAML file
                    sh 'oc --server=$OCP_SERVER_URL --token=$CLUSTER_AUTH_TOKEN project $OCP_PROJECT  --insecure-skip-tls-verify && oc --server=$OCP_SERVER_URL --token=$CLUSTER_AUTH_TOKEN apply -f application-deployment.yaml'
                }
            }
        }
    }
}

